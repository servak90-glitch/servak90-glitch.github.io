# üìù –ü–ª–∞–Ω: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –°—Ç–∞–Ω—Ü–∏—è –¥—Ä–æ–Ω–æ–≤ –∏ –°–ª—É—á–∞–π–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–æ—Å—Å–æ–≤

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –ø–æ –≥–ª—É–±–æ–∫–æ–º—É —É–ª—É—á—à–µ–Ω–∏—é –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫.

## üî¥ –ê–Ω–∞–ª–∏–∑ –∏ –¶–µ–ª–∏
1.  **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–Ω–æ–ª–∏—Ç–∞ `App.tsx` (39KB) –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–ª–æ–∏ –∏ –º–æ–¥—É–ª–∏.
2.  **–î—Ä–æ–Ω—ã**: –ü–µ—Ä–µ–Ω–æ—Å —ç–∫—Å–ø–µ–¥–∏—Ü–∏–π –≤–æ –≤–∫–ª–∞–¥–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ "–°—Ç–∞–Ω—Ü–∏–∏ –¥—Ä–æ–Ω–æ–≤" —Å –º–µ—Ö–∞–Ω–∏–∫–æ–π —Ç–æ–ø–ª–∏–≤–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.
3.  **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∏–≤–æ–π —Ä–æ—Å—Ç–∞ —Ä–∏—Å–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
4.  **–ë–æ—Å—Å—ã**: –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è —É—è–∑–≤–∏–º—ã—Ö —Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ö–∞—Ä–¥–∫–æ—Ä–Ω–æ—Å—Ç–∏.

---

## üõ†Ô∏è –§–∞–∑–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### 1.1 –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è App.tsx
- –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `components/layout/` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±–µ—Ä—Ç–æ–∫.
- `App.tsx` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∞–π–∞—É—Ç –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä —Ä–æ—É—Ç–æ–≤.
- **[NEW]** `NavigationManager.tsx`: –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è `View`.
- **[NEW]** `OverlayManager.tsx`: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏ –∏ –∞–ª–µ—Ä—Ç–∞–º–∏.

### 1.2 –ü—Ä–∏–Ω—Ü–∏–ø –°–ª–æ–µ–≤ (Layers)
- –í–Ω–µ–¥—Ä–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é z-index —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
- –†–∞–∑–¥–µ–ª–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä –Ω–∞ `GameplayLayer` (Pixi), `UILayer` (React) –∏ `SystemLayer` (Debug/DevTools).

---

## üõ∞Ô∏è –§–∞–∑–∞ 2: –°—Ç–∞–Ω—Ü–∏—è –¥—Ä–æ–Ω–æ–≤ –∏ –≠–∫—Å–ø–µ–¥–∏—Ü–∏–∏

### 2.1 –ù–æ–≤–∞—è –∏–Ω—Ñ–æ—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **[NEW] –ú–æ–¥—É–ª—å –±–∞–∑—ã**: `DroneStation`.
- **–°–≤–æ–π—Å—Ç–≤–∞**:
    - `fuelStorage: { coal, oil, gas }` ‚Äî –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –¥–ª—è –¥—Ä–æ–Ω–æ–≤.
    - `batteryLevel` / `maintenanceLevel` ‚Äî –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä–æ–Ω–æ–≤.
- **–°–≤—è–∑—å**: –ü–µ—Ä–µ–Ω–æ—Å `ExpeditionView` –≤–Ω—É—Ç—Ä—å `BaseManagementView`.

### 2.2 –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —è–¥—Ä–æ (–ö—Ä–∏–≤–∞—è —Ä–∏—Å–∫–∞)
–ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –õ–∞–ø–ª–∞—Å–∞** –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∏—Å–∫–∞.
–§–æ—Ä–º—É–ª–∞ –≤ `gameMath.ts`:
```typescript
/**
 * –†–∞—Å—á–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ—Ä–∏ –¥—Ä–æ–Ω–∞
 * depth: —Ç–µ–∫—É—â–∞—è –≥–ª—É–±–∏–Ω–∞ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –¥—Ä–æ–Ω–∞
 * k: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ö–∞—Ä–¥–∫–æ—Ä–Ω–æ—Å—Ç–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∏–æ–º–∞)
 */
export const calculateDroneRisk = (depth: number, k: number = 0.00001): number => {
    const baseRisk = 0.05; // 5% –º–∏–Ω–∏–º—É–º
    const risk = baseRisk + (1 - baseRisk) * (1 - Math.exp(-k * Math.pow(depth, 1.5)));
    return Math.min(risk, 0.95); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ 95%
};
```

### 2.3 –õ–æ–≥–∏–∫–∞ –°—Ç–∞–Ω—Ü–∏–∏
- –î—Ä–æ–Ω—ã –Ω–µ –º–æ–≥—É—Ç –ª–µ—Ç–µ—Ç—å –±–µ–∑ –∑–∞–ø—Ä–∞–≤–∫–∏.
- –†–µ—Å—É—Ä—Å—ã, –ø—Ä–∏–Ω–µ—Å–µ–Ω–Ω—ã–µ –¥—Ä–æ–Ω–∞–º–∏, –ø–æ–ø–∞–¥–∞—é—Ç –≤ `base.storedResources` (—Å–∫–ª–∞–¥ –±–∞–∑—ã), –∞ –Ω–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞.

---

## ‚öîÔ∏è –§–∞–∑–∞ 3: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ë–æ—Å—Å—ã

### 3.1 –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- **[NEW]** `services/systems/WeakPointGenerator.ts`: —Å–µ—Ä–≤–∏—Å, —Å–æ–∑–¥–∞—é—â–∏–π –æ—Ç 3 –¥–æ 6 —Ç–æ—á–µ–∫.
- **–õ–æ–≥–∏–∫–∞**: –¢–æ—á–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `boundingBox` –±–æ—Å—Å–∞, –ø—Ä–æ–≤–µ—Ä—è—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–ª–æ–∂–µ–Ω–∏—è.
- **–¢–∏–ø—ã —Ç–æ—á–µ–∫**:
    - `CRITICAL`: x3 —É—Ä–æ–Ω, —à–∞–Ω—Å 10%.
    - `WEAK`: x1.5 —É—Ä–æ–Ω, —à–∞–Ω—Å 50%.
    - `ARMOR`: –°–Ω–∏–∂–∞–µ—Ç –æ–±—â—É—é –∑–∞—â–∏—Ç—É –±–æ—Å—Å–∞ –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [ ] `App.tsx` —Å—Ç–∞–ª –º–µ–Ω—å—à–µ 10KB.
- [ ] –û–∫–Ω–æ —ç–∫—Å–ø–µ–¥–∏—Ü–∏–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ –º–µ–Ω—é –±–∞–∑—ã.
- [ ] –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–∞ –≤ `gameMath.ts` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –≥—Ä–∞—Ñ–∏–∫–æ–º (–ø–ª–∞–≤–Ω—ã–π —Ä–æ—Å—Ç).
- [ ] –í –±–æ—é —Å –±–æ—Å—Å–æ–º —É—è–∑–≤–∏–º—ã–µ —Ç–æ—á–∫–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π `BaseSlice` –Ω–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –Ω–æ–≤—ã–º –º–æ–¥—É–ª—è–º.
2. –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å "–°—Ç–∞–Ω—Ü–∏–∏ –¥—Ä–æ–Ω–æ–≤".
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `/create` –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –§–∞–∑—ã 1.
